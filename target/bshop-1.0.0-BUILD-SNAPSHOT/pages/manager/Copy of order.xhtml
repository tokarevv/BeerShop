<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<h:body>
	<ui:composition template="base.xhtml">
		<ui:define name="content">
			<h:form>
			
				<p:growl id="msgs" showDetail="true" />
				
				<h:outputText value="#{supplierOrderMB.orderType}" id="title" />

				<p:separator/>  

				<h:outputText value="Type: "  style="font-weight:bold" />

				<p:selectOneMenu value="#{supplierOrderMB.orderType}" >
					<f:selectItem itemLabel="Select type" itemValue="" />
					<f:selectItem itemLabel="order" itemValue="order" />
					<f:selectItem itemLabel="return" itemValue="return" />
					<p:ajax update="title,msgs"
						listener="#{supplierOrderMB.handleOrderTypeChange}" />
				</p:selectOneMenu>

				<br></br>

				<h:outputText value="Supplier:"  style="font-weight:bold" />
				<p:selectOneMenu value="#{supplierOrderMB.selectedSupplier}"
					effect="fade" converter="#{supplierConverter}">
					<f:selectItem itemLabel="Select One" itemValue="" />
					<f:selectItems value="#{supplierOrderMB.suppliers}" var="supplier"
						itemLabel="#{supplier.name}" itemValue="#{supplier}" />
					<p:ajax update="display,articles"
						listener="#{supplierOrderMB.handleSupplierChange}" />
				</p:selectOneMenu>

				<h:outputText value="#{supplierOrderMB.selectedSupplier.name}"
					id="display" />

				<p:separator/>  
				
				<h:outputText value="Articles: "></h:outputText>
				<p:dataTable id="articles" var="article"
					value="#{supplierOrderMB.articleList}" paginator="true" rows="10"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="10,20,50" emptyMessage="No data "
					editable="true" scrollable="true" liveScroll="true"
					paginatorAlwaysVisible="true" paginatorPosition="bottom">
					<p:column headerText=" ID " width="25">
						<h:outputText value="#{article.id}" />
					</p:column>

					<p:column headerText=" Name " width="150" sortBy="#{article.name}">
						<h:outputText value="#{article.name}" />
					</p:column>

					<p:column headerText="Supplier" width="150">
						<h:outputText value="#{article.supplier.getName()}" />
					</p:column>

					<p:column headerText="Quantity" width="30">
						<h:outputText value="#{article.quantity}" />
					</p:column>

					<p:column headerText="Unit" width="20">
						<h:outputText value="#{article.unit}" />
					</p:column>

					<p:column headerText="Price" width="20">
						<h:outputText value="#{article.price}" />
					</p:column>

					<p:column headerText="SalePrice" width="30">
						<h:outputText value="#{article.price*1.3}" />
					</p:column>

				</p:dataTable>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>

</html>
